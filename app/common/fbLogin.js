'use strict';window.fbAsyncInit=function(){FB.init({appId:'703692339810736',status:!0,xfbml:!0,version:'v2.9'}),checkLoginState()},function(a,b,c){var d=a.getElementsByTagName(b)[0];if(!a.getElementById(c)){var e=a.createElement(b);e.id=c,e.src='//connect.facebook.net/en_US/sdk.js',d.parentNode.insertBefore(e,d)}}(document,'script','facebook-jssdk');function statusChangeCallback(a,b){'connected'===a.status?loggedIn(a):loggedOut(b)}function checkLoginState(a){FB.getLoginStatus(function(b){return statusChangeCallback(b,a)})}function loggedIn(a){$('#adsblocked')&&$('#adsblocked').remove(),progress('show'),FB.api('/me?fields=first_name, last_name, picture',function(b){localStorage.setItem('rv-bookclub-id',b.id);var c={id:b.id,name:b.first_name+' '+b.last_name,location:'Add your location',signed:a.authResponse.accessToken};$.post('/api/user/',c).done(function(a){generateLoggedInUI(a,b.picture.data.url),progress('hide')}).fail(function(){console.error('Could not load data'),progress('hide')})})}function loggedOut(a){localStorage.removeItem('rv-bookclub-id'),a&&location.replace('/logout')}