'use strict';var path=process.cwd(),ClickHandler=require(path+'/app/controllers/clickHandler.server'),bookSearch=require(path+'/app/controllers/bookSearch.server'),auth=require(path+'/app/config/auth');module.exports=function(a){var b=new ClickHandler;a.route('/').get(function(a,b){b.sendFile(path+'/public/index.html')}),a.route('/logout').get(function(a,b){a.session.reset(),b.redirect('/')}),a.route('/addbook.html').get(function(a,b){return a.session.user?void b.sendFile(path+'/public/addbook.html'):b.redirect('/')}),a.route('/api/allBooks/').get(function(a,c){return b.showAllBooks(a,c)}),a.route('/api/user/:name?/:location?').post(function(a,b,c){auth(a.body.id,a.body.signed).then(function(){return c()}).catch(function(){return b.status(401).send()})},function(a,c){return b.createUser(a,c)}).put(function(a,c){return b.updateUser(a.session.user,a.params.name,a.params.location,c)}),a.route('/api/book/:bookId/:userId?').post(function(a,c){return b.addToCollection(a,c)}).put(function(a,c){return b.addBook(a.params.bookId,a.session.user,c)}).delete(function(a,c){return b.delBook(a.params.bookId,a.session.user,c)}),a.route('/api/trade/:obj').post(function(a,c){return b.makeTradeRequest(a.session.user,a.params.obj,c)}).put(function(a,c){return b.acceptTrade(a.session.user,a.params.obj,c)}).delete(function(a,c){return b.cancelTradeRequest(a.session.user,a.params.obj,c)}),a.route('/api/search/:book').get(function(a,b){bookSearch(a.params.book,b)})};